---
description: CRITICAL RULE - Task execution workflow. All tasks must follow TDD, be modular, and integrate with GitHub workflow (branch creation, status updates).
globs: ["*.cpp", "*.h", "*.ps1"]
alwaysApply: true
priority: 5
---

# ğŸ¯ Task Execution Rules

## ğŸš¨ MAIN RULE - INTEGRITY AND MODULARITY ğŸš¨

**ALWAYS** follow these rules when executing any task:

- âœ… **TDD mandatory**: All tasks must be tested and all tests must pass
- âœ… **Modularity**: Focus only on task integrity while always being modular
- âœ… **GitHub Integration**: Move task from TODO to In Progress on GitHub
- âœ… **Branch Creation**: Always create branch to start a task
- âœ… **Auto Status Update**: When adding branch to issue, automatically move to In Progress

## ğŸ“‹ Task Execution Workflow

### 1. Task Start

**ALWAYS** follow this sequence:

1. **Create branch** for the task
   ```bash
   git checkout -b feature/task-XX-task-name
   ```

2. **Add branch to issue** on GitHub
   - Use script `create-task-branch.ps1` or equivalent
   - Script must automatically move issue to "In Progress"

3. **Write tests FIRST** (TDD - Red)
   - Follow rule `test-driven-development-core.mdc`
   - Tests must fail initially (Red)

4. **Implement minimal functionality** (TDD - Green)
   - Make tests pass with minimal implementation

5. **Refactor safely** (TDD - Refactor)
   - Improve code while keeping tests green

### 2. During Development

**ALWAYS** maintain:

- âœ… **Modularity**: Each function/class with single responsibility
- âœ… **Tests passing**: All tests must pass before commit
- âœ… **Clean Code**: Follow `clean-code-mandatory.mdc`
- âœ… **Architecture**: Respect `project-architecture.mdc`

**NEVER**:

- âŒ Commit code without tests
- âŒ Commit code with failing tests
- âŒ Create non-modular code
- âŒ Violate Clean Code principles

### 3. Task Completion

**ALWAYS** verify before marking as completed:

- [ ] All tests pass?
- [ ] Code follows Clean Code?
- [ ] Code is modular?
- [ ] Architecture respected?
- [ ] Documentation updated (if necessary)?
- [ ] Branch added to issue?
- [ ] Issue moved to "In Progress" (or "Done" if completed)?

## ğŸ”„ IntegraÃ§Ã£o com GitHub

### Branch Creation Script

**ALWAYS** usar script que:

1. Cria branch localmente
2. Adiciona branch na issue do GitHub
3. **Automaticamente move issue para "In Progress"**

**Flow example:**

```powershell
# Script must do:
# 1. git checkout -b feature/task-XX-name
# 2. gh issue edit <issue-number> --add-assignee "@me"
# 3. gh issue edit <issue-number> --add-project "Project Name"
# 4. gh issue edit <issue-number> --body "Branch: feature/task-XX-name"
# 5. Automatically move to "In Progress"
```

### Issue Status

**ALWAYS** keep status updated:

- **TODO** â†’ When task is created
- **In Progress** â†’ When branch is created and added to issue
- **In Review** â†’ When PR is created
- **Done** â†’ When PR is merged

## ğŸ§ª TDD Mandatory for Tasks

### Golden Rule

> **"No task is considered complete without passing tests."**

### TDD Checklist for Task

Before considering task complete:

- [ ] Tests written BEFORE implementation (Red)?
- [ ] Tests clearly define expected behavior?
- [ ] Tests do NOT have internal logic (expected value is hardcoded)?
- [ ] Tests call real function from official module?
- [ ] Minimal implementation makes tests pass (Green)?
- [ ] Code was refactored with tests ensuring (Refactor)?
- [ ] All tests pass?
- [ ] Tests cover valid, invalid and edge cases?

### When to Apply TDD

**ALWAYS** apply TDD when:

- âœ… Creating new functionality
- âœ… Adding helper/utility
- âœ… Implementing business logic
- âœ… Refactoring critical code

**Can skip TDD when:**

- âŒ Simple Getters/Setters
- âŒ Direct API wrappers
- âŒ Very small changes (< 5 lines)

## ğŸ¯ Mandatory Modularity

### Fundamental Principle

> **"Each task must be complete and modular, without depending on other incomplete tasks."**

### Modularity Rules

**ALWAYS**:

- âœ… Task must be independent
- âœ… Task must have single responsibility
- âœ… Task must not break existing functionalities
- âœ… Task must follow Single Responsibility Principle

**NEVER**:

- âŒ Create task that depends on another incomplete task
- âŒ Mix multiple responsibilities in one task
- âŒ Break existing functionalities
- âŒ Create coupled code

### Task Integrity

**ALWAYS** ensure that:

- âœ… Task completely solves the proposed problem
- âœ… Task does not leave incomplete code
- âœ… Task does not create technical debt
- âœ… Task follows project patterns

## ğŸ“ Task Execution Checklist

### Before Starting

- [ ] Is task clear and well defined?
- [ ] Do I understand what needs to be done?
- [ ] Did I check dependencies?
- [ ] Will branch be created?

### During Development

- [ ] Tests written first (TDD)?
- [ ] Is code modular?
- [ ] Do tests pass?
- [ ] Clean Code applied?
- [ ] Architecture respected?

### Before Finishing

- [ ] All tests pass?
- [ ] Code reviewed?
- [ ] Branch added to issue?
- [ ] Issue moved to correct status?
- [ ] PR created (if applicable)?

## ğŸ”— IntegraÃ§Ã£o com Outras Regras

### Test-Driven Development

**This rule complements `test-driven-development-core.mdc`:**

- `test-driven-development-core.mdc`: **HOW** to apply TDD (methodology)
- `task-execution.mdc`: **WHEN** to apply TDD (in task context)

### Clean Code

**Esta regra reforÃ§a `clean-code-mandatory.mdc`:**

- Tasks devem seguir Clean Code
- Modularidade Ã© parte de Clean Code
- Integridade da task Ã© parte de Clean Code

### Execution Guard

**Esta regra trabalha com `execution-guard.mdc`:**

- Execution Guard protege integridade do projeto
- Task Execution garante integridade da task
- Ambas trabalham juntas para manter qualidade

## ğŸš« What NOT to Do

- âŒ **NEVER** start task without creating branch
- âŒ **NEVER** commit code without tests
- âŒ **NEVER** commit code with failing tests
- âŒ **NEVER** create non-modular code
- âŒ **NEVER** leave task incomplete
- âŒ **NEVER** ignore tests
- âŒ **NEVER** violate Clean Code
- âŒ **NEVER** break existing functionalities

## âœ… Benefits

- âœ… **Guaranteed quality**: TDD ensures tested code
- âœ… **Modularity**: Independent and complete tasks
- âœ… **Traceability**: GitHub integration shows progress
- âœ… **Confidence**: Passing tests ensure functionality
- âœ… **Maintainability**: Modular code is easier to maintain
- âœ… **Integrity**: Complete tasks don't leave incomplete code

## ğŸ“š ReferÃªncias

### Regras Relacionadas

- `.cursor/rules/test-driven-development-core.mdc` - TDD methodology
- `.cursor/rules/clean-code-mandatory.mdc` - Clean Code mandatory
- `.cursor/rules/project-architecture.mdc` - Project architecture
- `.cursor/rules/execution-guard.mdc` - Integrity protection
- `.cursor/rules/testing.mdc` - How to write tests

### Related Scripts

- `scripts/github/create-task-branch.ps1` - Create branch and update issue
- `scripts/github/createOrUpdateTask.ps1` - Manage tasks on GitHub

## ğŸ¯ Executive Summary

**Mandatory workflow:**

1. **Create branch** â†’ Add to issue â†’ **Move to In Progress**
2. **Write tests first** (TDD - Red)
3. **Implement functionality** (TDD - Green)
4. **Refactor** (TDD - Refactor)
5. **Ensure all tests pass**
6. **Maintain modularity and integrity**

**Golden rules:**

- âœ… TDD mandatory for all tasks
- âœ… Modularity mandatory
- âœ… Task integrity mandatory
- âœ… GitHub integration mandatory
- âœ… Branch creation mandatory

---

**This rule has HIGH priority and integrates with `test-driven-development.mdc`, `clean-code-mandatory.mdc`, and `execution-guard.mdc`.**
