---
description: CRITICAL RULE - Task execution workflow. All tasks must follow TDD, be modular, and integrate with GitHub workflow (branch creation, status updates).
globs: ["*.cpp", "*.h", "*.ps1"]
alwaysApply: true
---

# ğŸ¯ Task Execution Rules

## ğŸš¨ REGRA PRINCIPAL - INTEGRIDADE E MODULARIDADE ğŸš¨

**ALWAYS** seguir estas regras ao executar qualquer task:

- âœ… **TDD obrigatÃ³rio**: Todas tasks devem ser testadas e todos testes devem passar
- âœ… **Modularidade**: Focar somente na integridade da task sempre sendo modular
- âœ… **GitHub Integration**: Mover task de TODO para In Progress no GitHub
- âœ… **Branch Creation**: Sempre criar branch para iniciar uma task
- âœ… **Auto Status Update**: Ao adicionar branch na issue, mover automaticamente para In Progress

## ğŸ“‹ Workflow de ExecuÃ§Ã£o de Task

### 1. InÃ­cio da Task

**ALWAYS** seguir esta sequÃªncia:

1. **Criar branch** para a task
   ```bash
   git checkout -b feature/task-XX-nome-da-task
   ```

2. **Adicionar branch na issue** do GitHub
   - Usar script `create-task-branch.ps1` ou equivalente
   - Script deve automaticamente mover issue para "In Progress"

3. **Escrever testes PRIMEIRO** (TDD - Red)
   - Seguir regra `test-driven-development.mdc`
   - Testes devem falhar inicialmente (Red)

4. **Implementar funcionalidade mÃ­nima** (TDD - Green)
   - Fazer testes passarem com implementaÃ§Ã£o mÃ­nima

5. **Refatorar com seguranÃ§a** (TDD - Refactor)
   - Melhorar cÃ³digo mantendo testes verdes

### 2. Durante o Desenvolvimento

**ALWAYS** manter:

- âœ… **Modularidade**: Cada funÃ§Ã£o/classe com responsabilidade Ãºnica
- âœ… **Testes passando**: Todos testes devem passar antes de commit
- âœ… **Clean Code**: Seguir `clean-code-mandatory.mdc`
- âœ… **Arquitetura**: Respeitar `project-architecture.mdc`

**NEVER**:

- âŒ Commitar cÃ³digo sem testes
- âŒ Commitar cÃ³digo com testes falhando
- âŒ Criar cÃ³digo nÃ£o modular
- âŒ Violar princÃ­pios de Clean Code

### 3. FinalizaÃ§Ã£o da Task

**ALWAYS** verificar antes de marcar como concluÃ­da:

- [ ] Todos testes passam?
- [ ] CÃ³digo segue Clean Code?
- [ ] CÃ³digo Ã© modular?
- [ ] Arquitetura respeitada?
- [ ] DocumentaÃ§Ã£o atualizada (se necessÃ¡rio)?
- [ ] Branch adicionada na issue?
- [ ] Issue movida para "In Progress" (ou "Done" se finalizada)?

## ğŸ”„ IntegraÃ§Ã£o com GitHub

### Branch Creation Script

**ALWAYS** usar script que:

1. Cria branch localmente
2. Adiciona branch na issue do GitHub
3. **Automaticamente move issue para "In Progress"**

**Exemplo de fluxo:**

```powershell
# Script deve fazer:
# 1. git checkout -b feature/task-XX-nome
# 2. gh issue edit <issue-number> --add-assignee "@me"
# 3. gh issue edit <issue-number> --add-project "Nome do Projeto"
# 4. gh issue edit <issue-number> --body "Branch: feature/task-XX-nome"
# 5. Mover para "In Progress" automaticamente
```

### Status da Issue

**ALWAYS** manter status atualizado:

- **TODO** â†’ Quando task Ã© criada
- **In Progress** â†’ Quando branch Ã© criada e adicionada na issue
- **In Review** â†’ Quando PR Ã© criado
- **Done** â†’ Quando PR Ã© mergeado

## ğŸ§ª TDD ObrigatÃ³rio para Tasks

### Regra de Ouro

> **"Nenhuma task Ã© considerada completa sem testes que passam."**

### Checklist TDD para Task

Antes de considerar task completa:

- [ ] Testes escritos ANTES da implementaÃ§Ã£o (Red)?
- [ ] Testes definem comportamento esperado claramente?
- [ ] Testes NÃƒO tÃªm lÃ³gica interna (valor esperado Ã© hardcoded)?
- [ ] Testes chamam funÃ§Ã£o real do mÃ³dulo oficial?
- [ ] ImplementaÃ§Ã£o mÃ­nima faz testes passarem (Green)?
- [ ] CÃ³digo foi refatorado com testes garantindo (Refactor)?
- [ ] Todos testes passam?
- [ ] Testes cobrem casos vÃ¡lidos, invÃ¡lidos e edge cases?

### Quando Aplicar TDD

**ALWAYS** aplicar TDD quando:

- âœ… Criando nova funcionalidade
- âœ… Adicionando helper/utility
- âœ… Implementando lÃ³gica de negÃ³cio
- âœ… Refatorando cÃ³digo crÃ­tico

**Pode pular TDD quando:**

- âŒ Getters/Setters simples
- âŒ Wrappers diretos de API
- âŒ MudanÃ§as muito pequenas (< 5 linhas)

## ğŸ¯ Modularidade ObrigatÃ³ria

### PrincÃ­pio Fundamental

> **"Cada task deve ser completa e modular, sem depender de outras tasks incompletas."**

### Regras de Modularidade

**ALWAYS**:

- âœ… Task deve ser independente
- âœ… Task deve ter responsabilidade Ãºnica
- âœ… Task nÃ£o deve quebrar funcionalidades existentes
- âœ… Task deve seguir Single Responsibility Principle

**NEVER**:

- âŒ Criar task que depende de outra task incompleta
- âŒ Misturar mÃºltiplas responsabilidades em uma task
- âŒ Quebrar funcionalidades existentes
- âŒ Criar cÃ³digo acoplado

### Integridade da Task

**ALWAYS** garantir que:

- âœ… Task resolve completamente o problema proposto
- âœ… Task nÃ£o deixa cÃ³digo incompleto
- âœ… Task nÃ£o cria dÃ­vida tÃ©cnica
- âœ… Task segue padrÃµes do projeto

## ğŸ“ Checklist de ExecuÃ§Ã£o de Task

### Antes de Iniciar

- [ ] Task estÃ¡ clara e bem definida?
- [ ] Entendi o que precisa ser feito?
- [ ] Verifiquei dependÃªncias?
- [ ] Branch serÃ¡ criada?

### Durante o Desenvolvimento

- [ ] Testes escritos primeiro (TDD)?
- [ ] CÃ³digo Ã© modular?
- [ ] Testes passam?
- [ ] Clean Code aplicado?
- [ ] Arquitetura respeitada?

### Antes de Finalizar

- [ ] Todos testes passam?
- [ ] CÃ³digo revisado?
- [ ] Branch adicionada na issue?
- [ ] Issue movida para status correto?
- [ ] PR criado (se aplicÃ¡vel)?

## ğŸ”— IntegraÃ§Ã£o com Outras Regras

### Test-Driven Development

**Esta regra complementa `test-driven-development.mdc`:**

- `test-driven-development.mdc`: **COMO** aplicar TDD (metodologia)
- `task-execution.mdc`: **QUANDO** aplicar TDD (no contexto de tasks)

### Clean Code

**Esta regra reforÃ§a `clean-code-mandatory.mdc`:**

- Tasks devem seguir Clean Code
- Modularidade Ã© parte de Clean Code
- Integridade da task Ã© parte de Clean Code

### Execution Guard

**Esta regra trabalha com `execution-guard.mdc`:**

- Execution Guard protege integridade do projeto
- Task Execution garante integridade da task
- Ambas trabalham juntas para manter qualidade

## ğŸš« O Que NÃƒO Fazer

- âŒ **NUNCA** iniciar task sem criar branch
- âŒ **NUNCA** commitar cÃ³digo sem testes
- âŒ **NUNCA** commitar cÃ³digo com testes falhando
- âŒ **NUNCA** criar cÃ³digo nÃ£o modular
- âŒ **NUNCA** deixar task incompleta
- âŒ **NUNCA** ignorar testes
- âŒ **NUNCA** violar Clean Code
- âŒ **NUNCA** quebrar funcionalidades existentes

## âœ… BenefÃ­cios

- âœ… **Qualidade garantida**: TDD garante cÃ³digo testado
- âœ… **Modularidade**: Tasks independentes e completas
- âœ… **Rastreabilidade**: GitHub integration mostra progresso
- âœ… **ConfianÃ§a**: Testes passando garantem funcionamento
- âœ… **Manutenibilidade**: CÃ³digo modular Ã© mais fÃ¡cil de manter
- âœ… **Integridade**: Tasks completas nÃ£o deixam cÃ³digo incompleto

## ğŸ“š ReferÃªncias

### Regras Relacionadas

- `.cursor/rules/test-driven-development.mdc` - Metodologia TDD
- `.cursor/rules/clean-code-mandatory.mdc` - Clean Code obrigatÃ³rio
- `.cursor/rules/project-architecture.mdc` - Arquitetura do projeto
- `.cursor/rules/execution-guard.mdc` - ProteÃ§Ã£o de integridade
- `.cursor/rules/testing.mdc` - Como escrever testes

### Scripts Relacionados

- `scripts/github/create-task-branch.ps1` - Criar branch e atualizar issue
- `scripts/github/createOrUpdateTask.ps1` - Gerenciar tasks no GitHub

## ğŸ¯ Resumo Executivo

**Workflow obrigatÃ³rio:**

1. **Criar branch** â†’ Adicionar na issue â†’ **Mover para In Progress**
2. **Escrever testes primeiro** (TDD - Red)
3. **Implementar funcionalidade** (TDD - Green)
4. **Refatorar** (TDD - Refactor)
5. **Garantir que todos testes passam**
6. **Manter modularidade e integridade**

**Regras de ouro:**

- âœ… TDD obrigatÃ³rio para todas tasks
- âœ… Modularidade obrigatÃ³ria
- âœ… Integridade da task obrigatÃ³ria
- âœ… GitHub integration obrigatÃ³ria
- âœ… Branch creation obrigatÃ³ria

---

**This rule has HIGH priority and integrates with `test-driven-development.mdc`, `clean-code-mandatory.mdc`, and `execution-guard.mdc`.**
