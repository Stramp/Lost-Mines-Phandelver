---
description: Code organization pattern with regions, section comments and hierarchical structure
alwaysApply: true
globs: "**/*"
---

# Code Organization Pattern

## üéØ Objective

**ALWAYS** organize C++ files following a consistent pattern with:
- Clear section comments
- Regions to group related code
- Includes grouped by category
- Logical organization by responsibility
- Explanatory comments in important functions

## üìã Mandatory Structure

### 1. File Header

**ALWAYS** start with:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

// ============================================================================
// Includes
// ============================================================================
#pragma region Includes

// Project includes - [categoria]
#include "..."

// Engine includes
#include "..."

#pragma endregion Includes
```

### 2. Organization with Regions

**ALWAYS** use `#pragma region` to group related code:

```cpp
// ============================================================================
// [Section Name]
// ============================================================================
#pragma region [Section Name]

// Related code here...

#pragma endregion [Section Name]
```

### 3. Section Comments

**ALWAYS** use section comments with separators:

```cpp
// ============================================================================
// Section Name
// ============================================================================
```

**Separator pattern:**
- Use `===` to create visual line
- Consistent spacing
- Titles in PascalCase or descriptive

## üìÅ Organization by File Type

### .cpp Files (Implementation)

**Mandatory structure:**

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

// ============================================================================
// Includes
// ============================================================================
#pragma region Includes

#include "[Header].h"

// Project includes - [categoria 1]
#include "..."

// Project includes - [categoria 2]
#include "..."

// Engine includes
#include "..."

#if WITH_EDITOR
#include "..."
#endif

#pragma endregion Includes

// ============================================================================
// [Se√ß√£o Principal 1]
// ============================================================================
#pragma region [Se√ß√£o Principal 1]

/**
 * Coment√°rio explicativo da fun√ß√£o.
 * Explica o "porqu√™" e o "como" quando necess√°rio.
 */
void Function1()
{
    // Implementa√ß√£o
}

#pragma endregion [Se√ß√£o Principal 1]

// ============================================================================
// [Se√ß√£o Principal 2]
// ============================================================================
#pragma region [Se√ß√£o Principal 2]

// Mais c√≥digo...

#pragma endregion [Se√ß√£o Principal 2]
```

**Categorias de Includes:**
- `Project includes - Data Asset`
- `Project includes - Components`
- `Project includes - Helpers`
- `Project includes - Utils`
- `Project includes - Data Tables`
- `Project includes - CreateSheet`
- `Engine includes`

### .h Files (Header)

**Mandatory structure:**

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

// ============================================================================
// Includes
// ============================================================================
#pragma region Includes

#include "CoreMinimal.h"
#include "Engine/..."
#include "[File].generated.h"

#pragma endregion Includes

// ============================================================================
// [Se√ß√£o de Structs/Classes]
// ============================================================================
#pragma region [Se√ß√£o de Structs/Classes]

/**
 * Coment√°rio explicativo da struct/classe.
 */
USTRUCT(BlueprintType)
struct MYPROJECT2_API FMyStruct
{
    GENERATED_BODY()

    // Propriedades...
};

#pragma endregion [Se√ß√£o de Structs/Classes]
```

## üîç Exemplos de Se√ß√µes Comuns

### Para Handlers/Updaters/Validators

```cpp
// ============================================================================
// Property Change Handlers
// ============================================================================
#pragma region Property Change Handlers

// Handlers aqui...

#pragma endregion Property Change Handlers

// ============================================================================
// Wrapper Functions
// ============================================================================
#pragma region Wrapper Functions

// Wrappers aqui...

#pragma endregion Wrapper Functions
```

### Para Data Tables

```cpp
// ============================================================================
// Skills Struct
// ============================================================================
#pragma region Skills Struct

// Struct FSkills...

#pragma endregion Skills Struct

// ============================================================================
// Proficiencies Struct
// ============================================================================
#pragma region Proficiencies Struct

// Struct FProficienciesEntry...

#pragma endregion Proficiencies Struct
```

### Para Helpers

```cpp
// ============================================================================
// Variant Human Helpers
// ============================================================================
#pragma region Variant Human Helpers

// Fun√ß√µes relacionadas a Variant Human...

#pragma endregion Variant Human Helpers

// ============================================================================
// Ability Scores Helpers
// ============================================================================
#pragma region Ability Scores Helpers

// Fun√ß√µes relacionadas a Ability Scores...

#pragma endregion Ability Scores Helpers
```

## ‚úÖ Organization Rules

### 1. Logical Hierarchy

**ALWAYS** organize by logical hierarchy:
- Structs auxiliares primeiro
- Structs principais depois
- Classes/Structs de DataTable por √∫ltimo

**Exemplo:**
```
FSkills ‚Üí FProficienciesEntry ‚Üí FProgressEntry ‚Üí FClassData ‚Üí FClassDataRow
```

### 2. Agrupamento por Responsabilidade

**ALWAYS** agrupar c√≥digo por responsabilidade:
- Handlers juntos
- Validators juntos
- Updaters juntos
- Helpers por categoria

### 3. Coment√°rios Explicativos

**ALWAYS** adicionar coment√°rios explicativos em:
- Fun√ß√µes p√∫blicas importantes
- Structs/Classes principais
- L√≥gica complexa
- Decis√µes de design importantes

**Formato:**
```cpp
/**
 * Descri√ß√£o do que a fun√ß√£o faz.
 * Explica o "porqu√™" quando relevante.
 *
 * @param Param1 Descri√ß√£o do par√¢metro
 * @return Descri√ß√£o do retorno
 */
```

### 4. Includes Agrupados

**ALWAYS** agrupar includes por categoria:
1. Header correspondente (se .cpp)
2. Project includes (por categoria)
3. Engine includes
4. Editor includes (dentro de `#if WITH_EDITOR`)

## üö´ O Que N√ÉO Fazer

- ‚ùå **NEVER** mix includes without organization
- ‚ùå **NEVER** create regions without section comments
- ‚ùå **NEVER** skip include organization
- ‚ùå **NEVER** create very generic sections ("Misc", "Other")
- ‚ùå **NEVER** use regions without closing with `#pragma endregion`

## üìù Organization Checklist

Antes de considerar um arquivo "organizado":

- [ ] Copyright no topo
- [ ] Includes agrupados por categoria em region
- [ ] Coment√°rios de se√ß√£o com `===` antes de cada region
- [ ] Regions nomeados de forma descritiva
- [ ] C√≥digo agrupado por responsabilidade
- [ ] Fun√ß√µes importantes t√™m coment√°rios explicativos
- [ ] Hierarquia l√≥gica respeitada
- [ ] Todos os regions fechados corretamente

## üé® Benef√≠cios

- ‚úÖ Navega√ß√£o mais f√°cil no editor (regions colaps√°veis)
- ‚úÖ C√≥digo mais leg√≠vel e organizado
- ‚úÖ Manuten√ß√£o facilitada
- ‚úÖ Padr√£o consistente em todo o projeto
- ‚úÖ Onboarding mais r√°pido para novos desenvolvedores

## üìö Exemplos de Uso

### Exemplo 1: Handler File

```cpp
// ============================================================================
// Includes
// ============================================================================
#pragma region Includes

#include "CharacterSheetDataAssetHandlers.h"
#include "Characters/Data/CharacterSheetDataAsset.h"
// ... mais includes

#pragma endregion Includes

// ============================================================================
// Property Change Handlers
// ============================================================================
#pragma region Property Change Handlers

void HandleRaceChange(...) { ... }
void HandleBackgroundChange(...) { ... }

#pragma endregion Property Change Handlers

// ============================================================================
// Wrapper Functions
// ============================================================================
#pragma region Wrapper Functions

void HandleSelectedRaceWrapper(...) { ... }

#pragma endregion Wrapper Functions
```

### Exemplo 2: Data Table Header

```cpp
// ============================================================================
// Includes
// ============================================================================
#pragma region Includes

#include "CoreMinimal.h"
#include "Engine/DataTable.h"
#include "ClassDataTable.generated.h"

#pragma endregion Includes

// ============================================================================
// Skills Struct
// ============================================================================
#pragma region Skills Struct

USTRUCT(BlueprintType)
struct FSkills { ... };

#pragma endregion Skills Struct

// ============================================================================
// Class Data Struct
// ============================================================================
#pragma region Class Data Struct

USTRUCT(BlueprintType)
struct FClassData { ... };

#pragma endregion Class Data Struct
```

## üîÑ Quando Aplicar

**ALWAYS** apply this pattern when:
- ‚úÖ Creating new files
- ‚úÖ Refactoring existing files
- ‚úÖ Reorganizing code
- ‚úÖ Adding new large sections

**Can skip** (but still recommended) when:
- Very small files (< 50 lines)
- Temporary files (but remember: should not have temporary files!)

---

**Remember:** Consistency is key. All files must follow the same pattern to facilitate navigation and maintenance.
