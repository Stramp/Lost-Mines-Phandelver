---
description: Regras para manter código limpo, organizado e de qualidade
alwaysApply: true
---

# Qualidade e Organização de Código

## Princípios Gerais
- **SEMPRE** escreva código limpo e legível
- **SEMPRE** siga os padrões do Unreal Engine
- **SEMPRE** documente código complexo
- **SEMPRE** mantenha funções pequenas e focadas
- **SEMPRE** use nomes descritivos

## Organização de Código

### Estrutura de Arquivos
- Um arquivo .h e .cpp por classe
- Nome do arquivo = nome da classe
- Organize em subdiretórios por funcionalidade:
  - `Characters/` - Personagens
  - `Components/` - Componentes
  - `UI/` - Interface do usuário
  - `Gameplay/` - Mecânicas de jogo
  - `Utils/` - Utilitários

### Organização dentro de Arquivos
1. **Header (.h):**
   - Copyright
   - #pragma once
   - Includes
   - Forward declarations
   - UCLASS/USTRUCT/UENUM
   - Classe com:
     - Public: construtor, funções públicas, UPROPERTY/UFUNCTION públicos
     - Protected: funções protegidas, UPROPERTY/UFUNCTION protegidos
     - Private: membros privados

2. **Implementation (.cpp):**
   - Copyright
   - Include do header correspondente
   - Includes do projeto
   - Includes do Engine
   - Includes STL (se necessário)
   - Implementações

## Nomenclatura Consistente

### Classes
- Actors: `A` prefix (ex: `AMyCharacter`)
- UObjects: `U` prefix (ex: `UMyComponent`)
- Structs: `F` prefix (ex: `FPlayerStats`)
- Enums: `E` prefix (ex: `EPlayerState`)
- Interfaces: `I` prefix (ex: `IInteractable`)

### Variáveis
- Booleanos: `b` prefix (ex: `bIsRunning`)
- Floats/Ints: PascalCase (ex: `Health`, `MaxHealth`)
- Constantes: `const` + PascalCase (ex: `const float MaxSpeed = 1000.0f`)

### Funções
- PascalCase (ex: `BeginPlay()`, `TakeDamage()`)
- Verbos para ações (ex: `CalculateDamage()`, `SpawnEnemy()`)
- Get/Set para propriedades (ex: `GetHealth()`, `SetHealth()`)

## Comentários e Documentação

### Quando Comentar
- **SEMPRE** documente funções públicas
- **SEMPRE** explique "por quê" não "o quê"
- **SEMPRE** documente código complexo ou não óbvio
- **NUNCA** comente código óbvio

### Formato de Comentários
```cpp
/**
 * Calcula o dano baseado no tipo de arma e defesa do alvo.
 *
 * @param WeaponType Tipo da arma atacante
 * @param TargetDefense Valor de defesa do alvo
 * @return Dano calculado (sempre >= 0)
 */
float CalculateDamage(EWeaponType WeaponType, float TargetDefense);
```

## Refatoração e Limpeza

### Quando Refatorar
- Funções com mais de 50 linhas
- Código duplicado (DRY - Don't Repeat Yourself)
- Nomes confusos ou não descritivos
- Complexidade ciclomática alta
- Muitos parâmetros (> 4)

### Boas Práticas
- **SEMPRE** remova código comentado (use Git para histórico)
- **SEMPRE** remova includes não usados
- **SEMPRE** remova variáveis não usadas
- **SEMPRE** use const quando apropriado
- **SEMPRE** prefira referências const a cópias

## Validação e Erros

### Tratamento de Erros
- Use `check()` para asserções críticas (debug)
- Use `ensure()` para verificações importantes
- Use `UE_LOG()` para logging apropriado
- Retorne valores booleanos ou códigos de erro quando apropriado

### Validação de Entrada
- **SEMPRE** valide parâmetros de funções públicas
- **SEMPRE** valide dados de rede (RPCs)
- **SEMPRE** valide dados de Blueprint

## Performance

### Otimizações
- Desative `Tick` se não usar
- Use object pooling para objetos frequentes
- Prefira `TArray::Reserve()` quando tamanho conhecido
- Use `FName` para comparações frequentes
- Cache resultados de cálculos caros

### Quando NÃO Otimizar
- Não otimize prematuramente
- Profile antes de otimizar
- Legibilidade > Performance (exceto hot paths)

## Testes e Validação

### Antes de Commitar
- **SEMPRE** verifique se compila
- **SEMPRE** teste funcionalidades básicas
- **SEMPRE** verifique se não quebra Blueprints existentes
- **SEMPRE** remova logs de debug temporários

## Checklist de Código Limpo

Antes de considerar código "pronto":
- [ ] Compila sem erros ou warnings
- [ ] Segue padrões de nomenclatura
- [ ] Está organizado e legível
- [ ] Funções são pequenas e focadas
- [ ] Código complexo está documentado
- [ ] Não há código duplicado
- [ ] Não há código comentado
- [ ] Includes não usados foram removidos
- [ ] Const usado quando apropriado
- [ ] Tratamento de erros adequado
