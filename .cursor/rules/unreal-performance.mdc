---
description: Optimizations and performance best practices in Unreal Engine
globs: ["*.cpp", "*.h"]
alwaysApply: false
---

# Performance and Optimization - Unreal Engine 5.7

## Tick and Updates
- **ALWAYS** disable `Tick` if not necessary: `PrimaryActorTick.bCanEverTick = false;`
- Use `FTimerHandle` for periodic updates instead of Tick
- Use events and delegates instead of polling
- Consider `SetActorTickInterval()` to reduce Tick frequency

## Garbage Collection
- Minimize UObject allocations during gameplay
- Use object pooling for frequently created/destroyed objects
- Avoid creating UObjects in loops
- Use structs instead of UObjects when possible

## Containers
- Use `TArray` with `Reserve()` when size is known
- Use `TMap` for O(1) lookups, `TArray` for iterations
- Avoid `TArray::Find()` in loops - use `TMap` or `TSet`
- Use `TArray::RemoveAll()` instead of loops with `Remove()`

## Strings
- Use `FName` for frequent comparisons (case-insensitive, hashed)
- Use `FString` only when necessary (mutable, slow)
- Use `FText` for UI (localizable)
- Avoid string concatenation in loops

## Math
- Use `FVector`, `FRotator`, `FTransform` (optimized)
- Use `FMath` for math functions
- Avoid unnecessary conversions
- Use `Squared` versions when possible (ex: `FVector::DistSquared()`)

## Logging
- Use `UE_LOG()` with appropriate levels
- Disable logs in Shipping builds
- Avoid logs in loops or frequently called functions
- Use `UE_LOG` with `LogTemp` for temporary debug

## Networking
- Use `Replicated` only for properties that need to synchronize
- Minimize replicated data
- Use `ReplicatedUsing` for callbacks when values change
- Consider `NetMulticast` vs `Server` vs `Client` RPCs

## Profiling
- Use Unreal Insights for profiling
- Use `SCOPE_CYCLE_COUNTER()` to measure performance
- Use `STAT()` macros for statistics
- Profile before optimizing - measure, don't guess

## General Best Practices
- Prefer stack allocation instead of heap when possible
- Use `const` and `constexpr` when appropriate
- Avoid virtual functions in performance-critical code
- Use `inline` for small and frequent functions
- Cache results of expensive calculations
