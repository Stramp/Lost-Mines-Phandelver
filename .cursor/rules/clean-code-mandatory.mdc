---
description: REGRA CRÃTICA - Clean Code e Design Patterns sÃ£o OBRIGATÃ“RIOS em TODAS as situaÃ§Ãµes
globs: ["*.cpp", "*.h", "*.hpp", "*.cs"]
alwaysApply: true
---

# âš ï¸ REGRA CRÃTICA - CLEAN CODE E DESIGN PATTERNS OBRIGATÃ“RIOS âš ï¸

## ğŸš¨ REGRA ABSOLUTA - SEM EXCEÃ‡Ã•ES ğŸš¨

**SEMPRE, SEMPRE, SEMPRE** aplicar Clean Code e C++ Design Patterns em **TODAS** as situaÃ§Ãµes:

- âœ… CÃ³digo de produÃ§Ã£o
- âœ… Testes rÃ¡pidos
- âœ… ProtÃ³tipos
- âœ… CorreÃ§Ãµes de bug
- âœ… RefatoraÃ§Ãµes
- âœ… Novas features
- âœ… Qualquer linha de cÃ³digo escrita

**NUNCA, NUNCA, NUNCA** criar cÃ³digo que viole Clean Code ou Design Patterns, mesmo que seja:

- âŒ "SÃ³ um teste rÃ¡pido"
- âŒ "Depois eu arrumo"
- âŒ "Ã‰ temporÃ¡rio"
- âŒ "Funciona assim mesmo"

## PrincÃ­pios OBRIGATÃ“RIOS

### 1. FunÃ§Ãµes Helper/UtilitÃ¡rias

**REGRA CRÃTICA:** Qualquer funÃ§Ã£o que possa ser reutilizada DEVE estar em arquivo separado de helpers/utilities.

**SEMPRE:**

- âœ… FunÃ§Ãµes helper em `Utils/` ou `Helpers/`
- âœ… FunÃ§Ãµes parametrizadas (sem dependÃªncia de estado interno)
- âœ… FunÃ§Ãµes puras quando possÃ­vel
- âœ… FunÃ§Ãµes testÃ¡veis isoladamente

**NUNCA:**

- âŒ FunÃ§Ãµes helper dentro de classes quando podem ser reutilizadas
- âŒ FunÃ§Ãµes acopladas a estado interno quando podem ser parametrizadas
- âŒ DuplicaÃ§Ã£o de cÃ³digo de busca/verificaÃ§Ã£o

**Exemplo CORRETO:**

```cpp
// Utils/ComponentHelpers.h
UCharacterDataComponent* FindCharacterDataComponent(AActor* Owner);

// Utils/ComponentHelpers.cpp
UCharacterDataComponent* FindCharacterDataComponent(AActor* Owner)
{
    if (!Owner) return nullptr;
    return Owner->FindComponentByClass<UCharacterDataComponent>();
}
```

**Exemplo ERRADO:**

```cpp
// âŒ NUNCA fazer isso - funÃ§Ã£o privada acoplada
private:
    UCharacterDataComponent* FindOrGetCharacterDataComponent()
    {
        if (!CharacterDataComponent)
        {
            CharacterDataComponent = GetOwner()->FindComponentByClass<UCharacterDataComponent>();
        }
        return CharacterDataComponent;
    }
```

### 2. DRY (Don't Repeat Yourself)

**REGRA CRÃTICA:** Se vocÃª vai usar a mesma lÃ³gica em mais de um lugar, crie uma funÃ§Ã£o helper.

**SEMPRE:**

- âœ… Identificar cÃ³digo duplicado
- âœ… Extrair para funÃ§Ã£o helper
- âœ… Parametrizar adequadamente

**NUNCA:**

- âŒ Copiar e colar cÃ³digo
- âŒ "SÃ³ dessa vez vou duplicar"

### 3. Single Responsibility Principle (SRP)

**REGRA CRÃTICA:** Cada funÃ§Ã£o/classe deve ter uma Ãºnica responsabilidade.

**SEMPRE:**

- âœ… FunÃ§Ãµes pequenas e focadas
- âœ… Uma funÃ§Ã£o = uma aÃ§Ã£o
- âœ… Classes com responsabilidade Ãºnica

**NUNCA:**

- âŒ FunÃ§Ãµes que fazem mÃºltiplas coisas
- âŒ Classes que fazem tudo

### 4. Separation of Concerns

**REGRA CRÃTICA:** Separe lÃ³gica de negÃ³cio de lÃ³gica auxiliar.

**SEMPRE:**

- âœ… Helpers em arquivos separados
- âœ… UtilitÃ¡rios em `Utils/`
- âœ… FunÃ§Ãµes puras quando possÃ­vel

**NUNCA:**

- âŒ Misturar helpers com lÃ³gica de negÃ³cio
- âŒ Acoplar funÃ§Ãµes utilitÃ¡rias a classes especÃ­ficas

### 5. Testabilidade

**REGRA CRÃTICA:** CÃ³digo deve ser testÃ¡vel.

**SEMPRE:**

- âœ… FunÃ§Ãµes parametrizadas
- âœ… Sem dependÃªncias ocultas
- âœ… FunÃ§Ãµes puras quando possÃ­vel

**NUNCA:**

- âŒ FunÃ§Ãµes acopladas a estado global
- âŒ DependÃªncias hardcoded

## Checklist OBRIGATÃ“RIO

Antes de escrever QUALQUER cÃ³digo, pergunte:

- [ ] Esta funÃ§Ã£o pode ser reutilizada? â†’ Vai para `Utils/`
- [ ] Esta funÃ§Ã£o depende de estado interno? â†’ Pode ser parametrizada?
- [ ] Estou duplicando cÃ³digo? â†’ Extrair para helper
- [ ] Esta funÃ§Ã£o tem responsabilidade Ãºnica?
- [ ] Esta funÃ§Ã£o Ã© testÃ¡vel isoladamente?
- [ ] Estou seguindo Clean Code?
- [ ] Estou seguindo Design Patterns apropriados?

## Estrutura de Helpers/Utils

**SEMPRE** organize helpers em:

```text
Source/MyProject2/
â”œâ”€â”€ Utils/
â”‚   â”œâ”€â”€ ComponentHelpers.h
â”‚   â”œâ”€â”€ ComponentHelpers.cpp
â”‚   â”œâ”€â”€ MathHelpers.h
â”‚   â”œâ”€â”€ MathHelpers.cpp
â”‚   â””â”€â”€ ...
```

## Quando Criar Helper

**SEMPRE** crie helper quando:

1. âœ… FunÃ§Ã£o pode ser usada em mais de um lugar
2. âœ… FunÃ§Ã£o Ã© pura (sem efeitos colaterais)
3. âœ… FunÃ§Ã£o faz busca/verificaÃ§Ã£o genÃ©rica
4. âœ… FunÃ§Ã£o faz cÃ¡lculo/transformaÃ§Ã£o
5. âœ… FunÃ§Ã£o pode ser testada isoladamente

## ExceÃ§Ãµes

**NÃƒO HÃ EXCEÃ‡Ã•ES.** Esta regra Ã© absoluta.

## Lembrete Final

**TODA** linha de cÃ³digo deve seguir Clean Code e Design Patterns.

**NUNCA** crie cÃ³digo "temporÃ¡rio" ou "sÃ³ para testar" que viole essas regras.

**SEMPRE** pense em reutilizaÃ§Ã£o, testabilidade e manutenibilidade.

---

**Esta regra tem prioridade MÃXIMA sobre todas as outras regras.**
